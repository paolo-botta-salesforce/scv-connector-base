!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("SCVConnectorBase",[],e):"object"==typeof exports?exports.SCVConnectorBase=e():t.SCVConnectorBase=e()}(this,(function(){return function(t){var e={};function E(n){if(e[n])return e[n].exports;var r=e[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,E),r.l=!0,r.exports}return E.m=t,E.c=e,E.d=function(t,e,n){E.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},E.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},E.t=function(t,e){if(1&e&&(t=E(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(E.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)E.d(n,r,function(e){return t[e]}.bind(null,r));return n},E.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return E.d(e,"a",e),e},E.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},E.p="",E(E.s=14)}([function(t,e,E){var n=E(7);function r(t,e){for(var E=0;E<e.length;E++){var r=e[E];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,n(r.key),r)}}t.exports=function(t,e,E){return e&&r(t.prototype,e),E&&r(t,E),Object.defineProperty(t,"prototype",{writable:!1}),t},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e){t.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e,E){var n=E(7);t.exports=function(t,e,E){return(e=n(e))in t?Object.defineProperty(t,e,{value:E,enumerable:!0,configurable:!0,writable:!0}):t[e]=E,t},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e){function E(e){return t.exports=E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t.exports.__esModule=!0,t.exports.default=t.exports,E(e)}t.exports=E,t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e,E){var n=E(11)();t.exports=n;try{regeneratorRuntime=n}catch(t){"object"==typeof globalThis?globalThis.regeneratorRuntime=n:Function("r","regeneratorRuntime = r")(n)}},function(t,e){function E(t,e,E,n,r,a,T){try{var o=t[a](T),_=o.value}catch(t){return void E(t)}o.done?e(_):Promise.resolve(_).then(n,r)}t.exports=function(t){return function(){var e=this,n=arguments;return new Promise((function(r,a){var T=t.apply(e,n);function o(t){E(T,r,a,o,_,"next",t)}function _(t){E(T,r,a,o,_,"throw",t)}o(void 0)}))}},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e){function E(e){return t.exports=E=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},t.exports.__esModule=!0,t.exports.default=t.exports,E(e)}t.exports=E,t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e,E){var n=E(3).default,r=E(10);t.exports=function(t){var e=r(t,"string");return"symbol"===n(e)?e:String(e)},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e,E){var n=E(12);t.exports=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&n(t,e)},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e,E){var n=E(3).default,r=E(13);t.exports=function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return r(t)},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e,E){var n=E(3).default;t.exports=function(t,e){if("object"!==n(t)||null===t)return t;var E=t[Symbol.toPrimitive];if(void 0!==E){var r=E.call(t,e||"default");if("object"!==n(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e,E){var n=E(3).default;function r(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */t.exports=r=function(){return e},t.exports.__esModule=!0,t.exports.default=t.exports;var e={},E=Object.prototype,a=E.hasOwnProperty,T=Object.defineProperty||function(t,e,E){t[e]=E.value},o="function"==typeof Symbol?Symbol:{},_=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function N(t,e,E){return Object.defineProperty(t,e,{value:E,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{N({},"")}catch(t){N=function(t,e,E){return t[e]=E}}function l(t,e,E,n){var r=e&&e.prototype instanceof u?e:u,a=Object.create(r.prototype),o=new G(n||[]);return T(a,"_invoke",{value:L(t,E,o)}),a}function A(t,e,E){try{return{type:"normal",arg:t.call(e,E)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var c={};function u(){}function R(){}function O(){}var P={};N(P,_,(function(){return this}));var C=Object.getPrototypeOf,S=C&&C(C(D([])));S&&S!==E&&a.call(S,_)&&(P=S);var I=O.prototype=u.prototype=Object.create(P);function d(t){["next","throw","return"].forEach((function(e){N(t,e,(function(t){return this._invoke(e,t)}))}))}function p(t,e){var E;T(this,"_invoke",{value:function(r,T){function o(){return new e((function(E,o){!function E(r,T,o,_){var i=A(t[r],t,T);if("throw"!==i.type){var s=i.arg,N=s.value;return N&&"object"==n(N)&&a.call(N,"__await")?e.resolve(N.__await).then((function(t){E("next",t,o,_)}),(function(t){E("throw",t,o,_)})):e.resolve(N).then((function(t){s.value=t,o(s)}),(function(t){return E("throw",t,o,_)}))}_(i.arg)}(r,T,E,o)}))}return E=E?E.then(o,o):o()}})}function L(t,e,E){var n="suspendedStart";return function(r,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===r)throw a;return b()}for(E.method=r,E.arg=a;;){var T=E.delegate;if(T){var o=f(T,E);if(o){if(o===c)continue;return o}}if("next"===E.method)E.sent=E._sent=E.arg;else if("throw"===E.method){if("suspendedStart"===n)throw n="completed",E.arg;E.dispatchException(E.arg)}else"return"===E.method&&E.abrupt("return",E.arg);n="executing";var _=A(t,e,E);if("normal"===_.type){if(n=E.done?"completed":"suspendedYield",_.arg===c)continue;return{value:_.arg,done:E.done}}"throw"===_.type&&(n="completed",E.method="throw",E.arg=_.arg)}}}function f(t,e){var E=e.method,n=t.iterator[E];if(void 0===n)return e.delegate=null,"throw"===E&&t.iterator.return&&(e.method="return",e.arg=void 0,f(t,e),"throw"===e.method)||"return"!==E&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+E+"' method")),c;var r=A(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,c;var a=r.arg;return a?a.done?(e[t.resultName]=a.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,c):a:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,c)}function h(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function v(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function G(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(h,this),this.reset(!0)}function D(t){if(t){var e=t[_];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var E=-1,n=function e(){for(;++E<t.length;)if(a.call(t,E))return e.value=t[E],e.done=!1,e;return e.value=void 0,e.done=!0,e};return n.next=n}}return{next:b}}function b(){return{value:void 0,done:!0}}return R.prototype=O,T(I,"constructor",{value:O,configurable:!0}),T(O,"constructor",{value:R,configurable:!0}),R.displayName=N(O,s,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===R||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,O):(t.__proto__=O,N(t,s,"GeneratorFunction")),t.prototype=Object.create(I),t},e.awrap=function(t){return{__await:t}},d(p.prototype),N(p.prototype,i,(function(){return this})),e.AsyncIterator=p,e.async=function(t,E,n,r,a){void 0===a&&(a=Promise);var T=new p(l(t,E,n,r),a);return e.isGeneratorFunction(E)?T:T.next().then((function(t){return t.done?t.value:T.next()}))},d(I),N(I,s,"Generator"),N(I,_,(function(){return this})),N(I,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),E=[];for(var n in e)E.push(n);return E.reverse(),function t(){for(;E.length;){var n=E.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=D,G.prototype={constructor:G,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(v),!t)for(var e in this)"t"===e.charAt(0)&&a.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function E(E,n){return T.type="throw",T.arg=t,e.next=E,n&&(e.method="next",e.arg=void 0),!!n}for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n],T=r.completion;if("root"===r.tryLoc)return E("end");if(r.tryLoc<=this.prev){var o=a.call(r,"catchLoc"),_=a.call(r,"finallyLoc");if(o&&_){if(this.prev<r.catchLoc)return E(r.catchLoc,!0);if(this.prev<r.finallyLoc)return E(r.finallyLoc)}else if(o){if(this.prev<r.catchLoc)return E(r.catchLoc,!0)}else{if(!_)throw new Error("try statement without catch or finally");if(this.prev<r.finallyLoc)return E(r.finallyLoc)}}}},abrupt:function(t,e){for(var E=this.tryEntries.length-1;E>=0;--E){var n=this.tryEntries[E];if(n.tryLoc<=this.prev&&a.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var r=n;break}}r&&("break"===t||"continue"===t)&&r.tryLoc<=e&&e<=r.finallyLoc&&(r=null);var T=r?r.completion:{};return T.type=t,T.arg=e,r?(this.method="next",this.next=r.finallyLoc,c):this.complete(T)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),c},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var E=this.tryEntries[e];if(E.finallyLoc===t)return this.complete(E.completion,E.afterLoc),v(E),c}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var E=this.tryEntries[e];if(E.tryLoc===t){var n=E.completion;if("throw"===n.type){var r=n.arg;v(E)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,E){return this.delegate={iterator:D(t),resultName:e,nextLoc:E},"next"===this.method&&(this.arg=void 0),c}},e}t.exports=r,t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e){function E(e,n){return t.exports=E=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},t.exports.__esModule=!0,t.exports.default=t.exports,E(e,n)}t.exports=E,t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e){t.exports=function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e,E){"use strict";E.r(e),E.d(e,"initializeConnector",(function(){return mt})),E.d(e,"publishEvent",(function(){return xt})),E.d(e,"publishError",(function(){return kt})),E.d(e,"publishLog",(function(){return Mt})),E.d(e,"log",(function(){return G})),E.d(e,"Constants",(function(){return k})),E.d(e,"ActiveCallsResult",(function(){return w})),E.d(e,"AgentConfigResult",(function(){return j})),E.d(e,"AgentConfig",(function(){return F})),E.d(e,"CapabilitiesResult",(function(){return B})),E.d(e,"RecordingToggleResult",(function(){return W})),E.d(e,"ParticipantResult",(function(){return Q})),E.d(e,"SignedRecordingUrlResult",(function(){return z})),E.d(e,"PhoneContactsResult",(function(){return q})),E.d(e,"CallResult",(function(){return K})),E.d(e,"HangupResult",(function(){return J})),E.d(e,"HoldToggleResult",(function(){return X})),E.d(e,"InitResult",(function(){return $})),E.d(e,"GenericResult",(function(){return Z})),E.d(e,"MuteToggleResult",(function(){return H})),E.d(e,"LogoutResult",(function(){return tt})),E.d(e,"CallInfo",(function(){return et})),E.d(e,"PhoneCall",(function(){return rt})),E.d(e,"PhoneCallAttributes",(function(){return nt})),E.d(e,"Contact",(function(){return Et})),E.d(e,"Phone",(function(){return x})),E.d(e,"AgentStatusInfo",(function(){return ot})),E.d(e,"AudioStatsElement",(function(){return lt})),E.d(e,"AudioStats",(function(){return Nt})),E.d(e,"StatsInfo",(function(){return At})),E.d(e,"VendorConnector",(function(){return at})),E.d(e,"SuperviseCallResult",(function(){return ct})),E.d(e,"SupervisorHangupResult",(function(){return ut})),E.d(e,"SupervisedCallInfo",(function(){return st})),E.d(e,"AgentVendorStatusInfo",(function(){return _t})),E.d(e,"StateChangeResult",(function(){return it}));var n=E(2),r=E.n(n),a=E(5),T=E.n(a),o=E(3),_=E.n(o),i=E(4),s=E.n(i),N={MESSAGE_TYPE:{SETUP_CONNECTOR:"SETUP_CONNECTOR",CONNECTOR_READY:"CONNECTOR_READY",LOG:"LOG",TELEPHONY_EVENT_DISPATCHED:"TELEPHONY_EVENT_DISPATCHED",ACCEPT_CALL:"ACCEPT_CALL",DECLINE_CALL:"DECLINE_CALL",END_CALL:"END_CALL",MUTE:"MUTE",UNMUTE:"UNMUTE",HOLD:"HOLD",RESUME:"RESUME",SET_AGENT_STATUS:"SET_AGENT_STATUS",GET_AGENT_STATUS:"GET_AGENT_STATUS",DIAL:"DIAL",SEND_DIGITS:"SEND_DIGITS",GET_PHONE_CONTACTS:"GET_PHONE_CONTACTS",SWAP_PARTICIPANTS:"SWAP_PARTICIPANTS",ADD_PARTICIPANT:"ADD_PARTICIPANT",CONFERENCE:"CONFERENCE",PAUSE_RECORDING:"PAUSE_RECORDING",RESUME_RECORDING:"RESUME_RECORDING",LOGOUT:"LOGOUT",MESSAGE:"MESSAGE",WRAP_UP_CALL:"WRAP_UP_CALL",AGENT_AVAILABLE:"AGENT_AVAILABLE",SET_AGENT_CONFIG:"SET_AGENT_CONFIG",GET_SIGNED_RECORDING_URL:"GET_SIGNED_RECORDING_URL",DOWNLOAD_VENDOR_LOGS:"DOWNLOAD_VENDOR_LOGS",SUPERVISE_CALL:"SUPERVISE_CALL",SUPERVISOR_BARGE_IN:"SUPERVISOR_BARGE_IN",SUPERVISOR_DISCONNECT:"SUPERVISOR_DISCONNECT"},EVENT_TYPE:{QUEUED_CALL_STARTED:"QUEUED_CALL_STARTED",CALL_STARTED:"CALL_STARTED",CALL_CONNECTED:"CALL_CONNECTED",CALL_FAILED:"CALL_FAILED",MUTE_TOGGLE:"MUTE_TOGGLE",HOLD_TOGGLE:"HOLD_TOGGLE",HANGUP:"HANGUP",ERROR:"ERROR",WARNING:"WARNING",INFO:"INFO",PHONE_CONTACTS:"PHONE_CONTACTS",PARTICIPANT_ADDED:"PARTICIPANT_ADDED",PARTICIPANT_CONNECTED:"PARTICIPANT_CONNECTED",PARTICIPANT_REMOVED:"PARTICIPANT_REMOVED",LOGIN_STARTED:"LOGIN_STARTED",LOGIN_RESULT:"LOGIN_RESULT",LOGOUT_RESULT:"LOGOUT_RESULT",RECORDING_TOGGLE:"RECORDING_TOGGLE",PARTICIPANTS_SWAPPED:"PARTICIPANTS_SWAPPED",PARTICIPANTS_CONFERENCED:"PARTICIPANTS_CONFERENCED",SHOW_LOGIN:"SHOW_LOGIN",SET_AGENT_STATUS_RESULT:"SET_AGENT_STATUS_RESULT",GET_AGENT_STATUS_RESULT:"GET_AGENT_STATUS_RESULT",WRAP_UP_ENDED:"WRAP_UP_ENDED",MESSAGE:"MESSAGE",AFTER_CALL_WORK_STARTED:"AFTER_CALL_WORK_STARTED",AGENT_CONFIG_UPDATED:"AGENT_CONFIG_UPDATED",AGENT_ERROR:"AGENT_ERROR",SOFTPHONE_ERROR:"SOFTPHONE_ERROR",SIGNED_RECORDING_URL:"SIGNED_RECORDING_URL",UPDATE_AUDIO_STATS:"UPDATE_AUDIO_STATS",UPDATE_AUDIO_STATS_COMPLETED:"UPDATE_AUDIO_STATS_COMPLETED",SUPERVISOR_BARGED_IN:"SUPERVISOR_BARGED_IN",SUPERVISOR_CALL_STARTED:"SUPERVISOR_CALL_STARTED",SUPERVISOR_CALL_CONNECTED:"SUPERVISOR_CALL_CONNECTED",SUPERVISOR_HANGUP:"SUPERVISOR_HANGUP",CALL_BARGED_IN:"CALL_BARGED_IN",SET_AGENT_STATUS:"SET_AGENT_STATUS",GET_AGENT_STATUS:"GET_AGENT_STATUS",STATE_CHANGE:"STATE_CHANGE"},INFO_TYPE:{CAN_NOT_ACCEPT_THE_CALL:"CAN_NOT_ACCEPT_THE_CALL"},ERROR_TYPE:{GENERIC_ERROR:"GENERIC_ERROR",AGENT_ERROR:"AGENT_ERROR",MICROPHONE_NOT_SHARED:"MICROPHONE_NOT_SHARED",UNSUPPORTED_BROWSER:"UNSUPPORTED_BROWSER",AUTHENTICATION_ERROR:"AUTHENTICATION_ERROR",INVALID_AGENT_STATUS:"INVALID_AGENT_STATUS",CAN_NOT_SET_AGENT_STATUS:"CAN_NOT_SET_AGENT_STATUS",LOGIN_REQUIRED:"LOGIN_REQUIRED",CAN_NOT_DECLINE_THE_CALL:"CAN_NOT_DECLINE_THE_CALL",CAN_NOT_END_THE_CALL:"CAN_NOT_END_THE_CALL",CAN_NOT_HOLD_CALL:"CAN_NOT_HOLD_CALL",CAN_NOT_RESUME_CALL:"CAN_NOT_RESUME_CALL",CAN_NOT_MUTE_CALL:"CAN_NOT_MUTE_CALL",CAN_NOT_UNMUTE_CALL:"CAN_NOT_UNMUTE_CALL",CAN_NOT_TOGGLE_MUTE:"CAN_NOT_TOGGLE_MUTE",CAN_NOT_TOGGLE_HOLD:"CAN_NOT_TOGGLE_HOLD",CAN_NOT_TOGGLE_RECORD:"CAN_NOT_TOGGLE_RECORD",INVALID_PARTICIPANT:"INVALID_PARTICIPANT",CAN_NOT_LOG_IN:"CAN_NOT_LOG_IN",CAN_NOT_LOG_OUT:"CAN_NOT_LOG_OUT",INVALID_PARAMS:"INVALID_PARAMS",CAN_NOT_GET_PHONE_CONTACTS:"CAN_NOT_GET_PHONE_CONTACTS",CAN_NOT_SWAP_PARTICIPANTS:"CAN_NOT_SWAP_PARTICIPANTS",CAN_NOT_CONFERENCE:"CAN_NOT_CONFERENCE",INVALID_DESTINATION:"INVALID_DESTINATION",INVALID_PHONE_NUMBER:"INVALID_PHONE_NUMBER",CAN_NOT_HANGUP_PARTICIPANT:"CAN_NOT_HANGUP_PARTICIPANT",CAN_NOT_ADD_PARTICIPANT:"CAN_NOT_ADD_PARTICIPANT",CAN_NOT_CONNECT_PARTICIPANT:"CAN_NOT_CONNECT_PARTICIPANT",CAN_NOT_START_THE_CALL:"CAN_NOT_START_THE_CALL",CAN_NOT_PAUSE_RECORDING:"CAN_NOT_PAUSE_RECORDING",CAN_NOT_RESUME_RECORDING:"CAN_NOT_RESUME_RECORDING",CAN_NOT_SET_AGENT_CONFIG:"CAN_NOT_SET_AGENT_CONFIG",CAN_NOT_SET_CAPABILITIES:"CAN_NOT_SET_CAPABILITIES",CAN_NOT_UPDATE_PHONE_NUMBER:"CAN_NOT_UPDATE_PHONE_NUMBER",CAN_NOT_GET_SIGNED_RECORDING_URL:"CAN_NOT_GET_SIGNED_RECORDING_URL",CAN_NOT_SUPERVISE_CALL:"CAN_NOT_SUPERVISE_CALL",CAN_NOT_DISCONNECT_SUPERVISOR:"CAN_NOT_DISCONNECT_SUPERVISOR",CAN_NOT_BARGE_IN_SUPERVISOR:"CAN_NOT_BARGE_IN_SUPERVISOR",CAN_NOT_BARGE_IN_CALL:"CAN_NOT_BARGE_IN_CALL",CAN_NOT_GET_AGENT_STATUS:"CAN_NOT_GET_AGENT_STATUS",INVALID_STATE_CHANGE_RESULT:"INVALID_STATE_CHANGE_RESULT"},AGENT_STATUS:{ONLINE:"Online",OFFLINE:"Offline",ACW:"AfterCallWork",CALLBACK_MISSED_OR_REJECTED:"CallbackMissedOrRejected"},PARTICIPANT_TYPE:{AGENT:"Agent",INITIAL_CALLER:"Initial_Caller",THIRD_PARTY:"Third_Party",SUPERVISOR:"Supervisor"},CALL_TYPE:{INBOUND:"Inbound",OUTBOUND:"Outbound",CALLBACK:"Callback",ADD_PARTICIPANT:"AddParticipant",TRANSFER:"Transfer"},DIALER_TYPE:{OUTBOUND_PREVIEW:"OutboundPreview",NONE:"None"},CONTACT_TYPE:{PHONEBOOK:"PhoneBook",QUEUE:"Queue",PHONENUMBER:"PhoneNumber",AGENT:"Agent",FLOW:"Flow"},AGENT_CONFIG_TYPE:{SHOW_AGENT_SETTINGS:"SHOW_AGENT_SETTINGS",PHONES:"PHONES",SELECTED_PHONE:"SELECTED_PHONE"},CAPABILITIES_TYPE:{MUTE:"MUTE",RECORD:"RECORD",MERGE:"MERGE",SWAP:"SWAP",SIGNED_RECORDING_URL:"SIGNED_RECORDING_URL",DEBUG_ENABLED:"DEBUG_ENABLED",CONTACT_SEARCH:"CONTACT_SEARCH",VENDOR_PROVIDED_AVAILABILITY:"VENDOR_PROVIDED_AVAILABILITY",VENDOR_PROVIDED_QUEUE_WAIT_TIME:"VENDOR_PROVIDED_QUEUE_WAIT_TIME",SUPERVISOR_LISTEN_IN:"SUPERVISOR_LISTEN_IN",SUPERVISOR_BARGE_IN:"SUPERVISOR_BARGE_IN",MOS:"MOS",BLIND_TRANSFER:"BLIND_TRANSFER",TRANSFER_TO_OMNI_FLOW:"TRANSFER_TO_OMNI_FLOW",PENDING_STATUS_CHANGE:"PENDING_STATUS_CHANGE"},CALL_STATE:{RINGING:"ringing",CONNECTED:"connected",TRANSFERRING:"transferring",TRANSFERRED:"transferred",ENDED:"ended"},PHONE_TYPE:{DESK_PHONE:"DESK_PHONE",SOFT_PHONE:"SOFT_PHONE"},HANGUP_REASON:{PHONE_CALL_ERROR:"error",PHONE_CALL_ENDED:"ended"},AGENT_AVAILABILITY:{AVAILABLE:"AVAILABLE",BUSY:"BUSY",OFFLINE:"OFFLINE"},REMOVE_PARTICIPANT_VARIANT:{ALWAYS:"ALWAYS",NEVER:"NEVER",ALWAYS_EXCEPT_ON_HOLD:"ALWAYS_EXCEPT_ON_HOLD"},LOG_LEVEL:{ERROR:"ERROR",INFO:"INFO"},LOG_SOURCE:{SYSTEM:"SYSTEM",PARTNER:"PARTNER"},CONTACTS_FILTER_TYPES:{AGENT:"AGENT",QUEUE:"QUEUE",CONTACT:"CONTACT",DIRECTORY:"DIRECTORY",FLOW:"FLOW",AVAILABLE:"AVAILABLE"}},l=["/internalNameLabel","/reqGeneralInfo/reqAdapterUrl","/reqGeneralInfo/reqVendorInfoApiName","isACWAllowed","isHVSEnabled","orgDomainName","phoneServiceChannelId","telephonySettingsComponentFqn"],A=["/reqHvcc"],c=["/reqHvcc/reqTelephonyIntegrationCertificate"],u=E(8),R=E.n(u),O=E(9),P=E.n(O),C=E(6),S=E.n(C),I=E(0),d=E.n(I),p=E(1),L=E.n(p);var f=function(t){return"string"==typeof t?t:JSON.stringify(t)},h=0,v=[];function G(t,e,E){!function(t,e,E){if(!e)throw new Error("Log Message required");t=t||N.LOG_LEVEL.INFO,E=E||N.LOG_SOURCE.PARTNER;var n=[(new Date).toISOString(),f(t),f(E),"".concat(f(e),"\n")].join("|");h+n.length>=75e5&&(v=[],h=0),h+=n.length,v.push(n)}(e,t,E)}function D(){return JSON.parse(JSON.stringify(v))}function b(){!function(t,e,E){if(document&&t){var n="string"==typeof t?t:JSON.stringify(t),r=new Blob([n],{type:E}),a=document.createElement("a"),T=URL.createObjectURL(r);a.download=e,a.href=T,document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(T)}}(v.join(""),"log-".concat((new Date).getTime(),".txt"),"text/plain")}function Y(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var E,n=S()(t);if(e){var r=S()(this).constructor;E=Reflect.construct(n,arguments,r)}else E=n.apply(this,arguments);return P()(this,E)}}function U(t,e){var E=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),E.push.apply(E,n)}return E}function V(t){for(var e=1;e<arguments.length;e++){var E=null!=arguments[e]?arguments[e]:{};e%2?U(Object(E),!0).forEach((function(e){r()(t,e,E[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(E)):U(Object(E)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(E,e))}))}return t}var g,y,m,M,k={EVENT_TYPE:{LOGIN_RESULT:N.EVENT_TYPE.LOGIN_RESULT,LOGOUT_RESULT:N.EVENT_TYPE.LOGOUT_RESULT,CALL_STARTED:N.EVENT_TYPE.CALL_STARTED,QUEUED_CALL_STARTED:N.EVENT_TYPE.QUEUED_CALL_STARTED,CALL_CONNECTED:N.EVENT_TYPE.CALL_CONNECTED,HANGUP:N.EVENT_TYPE.HANGUP,MUTE_TOGGLE:N.EVENT_TYPE.MUTE_TOGGLE,HOLD_TOGGLE:N.EVENT_TYPE.HOLD_TOGGLE,RECORDING_TOGGLE:N.EVENT_TYPE.RECORDING_TOGGLE,PARTICIPANTS_SWAPPED:N.EVENT_TYPE.PARTICIPANTS_SWAPPED,PARTICIPANTS_CONFERENCED:N.EVENT_TYPE.PARTICIPANTS_CONFERENCED,PARTICIPANT_ADDED:N.EVENT_TYPE.PARTICIPANT_ADDED,PARTICIPANT_CONNECTED:N.EVENT_TYPE.PARTICIPANT_CONNECTED,PARTICIPANT_REMOVED:N.EVENT_TYPE.PARTICIPANT_REMOVED,MESSAGE:N.EVENT_TYPE.MESSAGE,AFTER_CALL_WORK_STARTED:N.EVENT_TYPE.AFTER_CALL_WORK_STARTED,WRAP_UP_ENDED:N.EVENT_TYPE.WRAP_UP_ENDED,AGENT_ERROR:N.EVENT_TYPE.AGENT_ERROR,SOFTPHONE_ERROR:N.EVENT_TYPE.SOFTPHONE_ERROR,UPDATE_AUDIO_STATS:N.EVENT_TYPE.UPDATE_AUDIO_STATS,SUPERVISOR_BARGED_IN:N.EVENT_TYPE.SUPERVISOR_BARGED_IN,SUPERVISOR_CALL_STARTED:N.EVENT_TYPE.SUPERVISOR_CALL_STARTED,SUPERVISOR_CALL_CONNECTED:N.EVENT_TYPE.SUPERVISOR_CALL_CONNECTED,SUPERVISOR_HANGUP:N.EVENT_TYPE.SUPERVISOR_HANGUP,SET_AGENT_STATUS:N.EVENT_TYPE.SET_AGENT_STATUS,GET_AGENT_STATUS:N.EVENT_TYPE.GET_AGENT_STATUS,STATE_CHANGE:N.EVENT_TYPE.STATE_CHANGE},ERROR_TYPE:{GENERIC_ERROR:N.ERROR_TYPE.GENERIC_ERROR,INVALID_PARTICIPANT:N.ERROR_TYPE.INVALID_PARTICIPANT,INVALID_DESTINATION:N.ERROR_TYPE.INVALID_DESTINATION,INVALID_PARAMS:N.ERROR_TYPE.INVALID_PARAMS,INVALID_AGENT_STATUS:N.ERROR_TYPE.INVALID_AGENT_STATUS,CAN_NOT_UPDATE_PHONE_NUMBER:N.ERROR_TYPE.CAN_NOT_UPDATE_PHONE_NUMBER},AGENT_STATUS:V({},N.AGENT_STATUS),PARTICIPANT_TYPE:V({},N.PARTICIPANT_TYPE),CALL_TYPE:V({},N.CALL_TYPE),DIALER_TYPE:V({},N.DIALER_TYPE),CONTACT_TYPE:V({},N.CONTACT_TYPE),CALL_STATE:V({},N.CALL_STATE),HANGUP_REASON:V({},N.HANGUP_REASON),PHONE_TYPE:V({},N.PHONE_TYPE),AGENT_AVAILABILITY:V({},N.AGENT_AVAILABILITY),REMOVE_PARTICIPANT_VARIANT:V({},N.REMOVE_PARTICIPANT_VARIANT),LOG_LEVEL:V({},N.LOG_LEVEL),CONTACTS_FILTER_TYPES:V({},N.CONTACTS_FILTER_TYPES)},x=d()((function t(e){var E=e.type,n=e.number;L()(this,t),Tt.validateEnum(E,Object.values(N.PHONE_TYPE)),n&&Tt.validateString(n),this.type=E,this.number=n})),H=d()((function t(e){var E=e.isMuted;L()(this,t),this.isMuted=E})),w=d()((function t(e){var E=e.activeCalls,n=void 0===E?[]:E;L()(this,t),n.length>0&&n.forEach((function(t){Tt.validateClassObject(t,rt)})),this.activeCalls=n})),B=d()((function t(e){var E=e.hasMute,n=void 0===E||E,r=e.hasRecord,a=void 0===r||r,T=e.hasMerge,o=void 0===T||T,_=e.hasSwap,i=void 0===_||_,s=e.hasSignedRecordingUrl,N=void 0!==s&&s,l=e.debugEnabled,A=void 0===l||l,c=e.hasContactSearch,u=void 0!==c&&c,R=e.hasAgentAvailability,O=void 0!==R&&R,P=e.hasQueueWaitTime,C=void 0!==P&&P,S=e.supportsMos,I=void 0!==S&&S,d=e.hasSupervisorListenIn,p=void 0!==d&&d,f=e.hasSupervisorBargeIn,h=void 0!==f&&f,v=e.hasBlindTransfer,G=void 0!==v&&v,D=e.hasTransferToOmniFlow,b=void 0!==D&&D,Y=e.hasPendingStatusChange,U=void 0!==Y&&Y;L()(this,t),Tt.validateBoolean(n),Tt.validateBoolean(a),Tt.validateBoolean(o),Tt.validateBoolean(i),Tt.validateBoolean(N),Tt.validateBoolean(A),Tt.validateBoolean(u),Tt.validateBoolean(O),Tt.validateBoolean(C),Tt.validateBoolean(I),Tt.validateBoolean(p),Tt.validateBoolean(h),Tt.validateBoolean(G),Tt.validateBoolean(b),Tt.validateBoolean(U),this.hasMute=n,this.hasRecord=a,this.hasMerge=o,this.hasSwap=i,this.hasSignedRecordingUrl=N,this.debugEnabled=A,this.hasContactSearch=u,this.hasAgentAvailability=O,this.supportsMos=I,this.hasSupervisorListenIn=p,this.hasSupervisorBargeIn=h,this.hasBlindTransfer=G,this.hasTransferToOmniFlow=b,this.hasPendingStatusChange=U})),j=d()((function t(e){var E=e.phones,n=void 0===E?[N.PHONE_TYPE.SOFT_PHONE]:E,r=e.selectedPhone,a=void 0===r?new x({type:N.PHONE_TYPE.SOFT_PHONE}):r;L()(this,t),Tt.validateClassObject(n,Array),Tt.validateClassObject(a,x),this.phones=n,this.selectedPhone=a})),F=d()((function t(e){var E=e.selectedPhone;L()(this,t),Tt.validateClassObject(E,x),this.selectedPhone=E})),W=d()((function t(e){var E=e.isRecordingPaused,n=e.contactId,r=void 0===n?null:n,a=e.initialContactId,T=void 0===a?null:a,o=e.instanceId,_=void 0===o?null:o,i=e.region,s=void 0===i?null:i;L()(this,t),this.isRecordingPaused=E,this.contactId=r,this.initialContactId=T,this.instanceId=_,this.region=s})),Q=d()((function t(e){var E=e.initialCallHasEnded,n=e.callInfo,r=e.phoneNumber,a=e.callId;L()(this,t),Tt.validateClassObject(n,et),this.initialCallHasEnded=E,this.callInfo=n,this.phoneNumber=r,this.callId=a})),q=d()((function t(e){var E=e.contacts,n=void 0===E?[]:E,r=e.contactTypes,a=void 0===r?[]:r;L()(this,t),n.length>0&&n.forEach((function(t){Tt.validateClassObject(t,Et)})),a.length>0&&a.forEach((function(t){Tt.validateEnum(t,Object.values(N.CONTACT_TYPE))})),this.contacts=n,this.contactTypes=a})),K=d()((function t(e){var E=e.call;L()(this,t),void 0!==E&&Tt.validateClassObject(E,rt),this.call=E})),J=d()((function t(e){var E=e.calls;L()(this,t),E instanceof Array?(E.forEach((function(t){return Tt.validateClassObject(t,rt)})),this.calls=E):(Tt.validateClassObject(E,rt),this.calls=[E])})),X=d()((function t(e){var E=e.isThirdPartyOnHold,n=e.isCustomerOnHold,r=e.calls;L()(this,t),r&&(Object.values(r).forEach((function(t){Tt.validateClassObject(t,rt)})),this.calls=r),this.isThirdPartyOnHold=E,this.isCustomerOnHold=n})),z=d()((function t(e){var E=e.success,n=e.url,r=e.duration,a=e.callId;L()(this,t),E&&(Tt.validateString(n),Tt.validateString(a),r&&Tt.validateNumber(r)),this.success=E,this.url=n,this.duration=r,this.callId=a})),$=d()((function t(e){var E=e.showLogin,n=void 0!==E&&E,r=e.loginFrameHeight,a=void 0===r?350:r;L()(this,t),this.showLogin=n,this.loginFrameHeight=a})),Z=d()((function t(e){var E=e.success;L()(this,t),this.success=E})),tt=d()((function t(e){var E=e.success,n=e.loginFrameHeight,r=void 0===n?350:n;L()(this,t),this.success=E,this.loginFrameHeight=r})),et=d()((function t(e){var E=e.callStateTimestamp,n=void 0===E?null:E,r=e.isOnHold,a=e.isMuted,T=void 0!==a&&a,o=e.isRecordingPaused,_=void 0!==o&&o,i=e.initialCallId,s=e.isSoftphoneCall,l=void 0===s||s,A=e.acceptEnabled,c=void 0===A||A,u=e.declineEnabled,R=void 0===u||u,O=e.muteEnabled,P=void 0===O||O,C=e.swapEnabled,S=void 0===C||C,I=e.conferenceEnabled,d=void 0===I||I,p=e.holdEnabled,f=void 0===p||p,h=e.recordEnabled,v=void 0===h||h,G=e.addCallerEnabled,D=void 0===G||G,b=e.extensionEnabled,Y=void 0===b||b,U=e.isReplayable,V=void 0===U||U,g=e.isBargeable,y=void 0!==g&&g,m=e.isExternalTransfer,M=e.showMuteButton,x=void 0===M||M,H=e.showRecordButton,w=void 0===H||H,B=e.showAddCallerButton,j=void 0===B||B,F=e.showAddBlindTransferButton,W=void 0===F||F,Q=e.showMergeButton,q=void 0===Q||Q,K=e.showSwapButton,J=void 0===K||K,X=e.removeParticipantVariant,z=void 0===X?k.REMOVE_PARTICIPANT_VARIANT.ALWAYS:X;L()(this,t),n&&Tt.validateDate(n),Tt.validateBoolean(_),Tt.validateBoolean(T),Tt.validateBoolean(l),Tt.validateBoolean(c),Tt.validateBoolean(R),Tt.validateBoolean(P),Tt.validateBoolean(S),Tt.validateBoolean(d),Tt.validateBoolean(f),Tt.validateBoolean(v),Tt.validateBoolean(D),Tt.validateBoolean(Y),Tt.validateBoolean(y),Tt.validateBoolean(x),Tt.validateBoolean(w),Tt.validateBoolean(j),Tt.validateBoolean(W),Tt.validateBoolean(q),Tt.validateBoolean(J),void 0!==m&&Tt.validateBoolean(m),Tt.validateEnum(z,Object.values(N.REMOVE_PARTICIPANT_VARIANT)),this.callStateTimestamp=n,this.isRecordingPaused=_,this.isMuted=T,this.isOnHold=r,this.initialCallId=i,this.isSoftphoneCall=l,this.acceptEnabled=c,this.declineEnabled=R,this.muteEnabled=P,this.swapEnabled=S,this.conferenceEnabled=d,this.holdEnabled=f,this.recordEnabled=v,this.addCallerEnabled=D,this.extensionEnabled=Y,this.isReplayable=V,this.isBargeable=y,this.isExternalTransfer=m,this.removeParticipantVariant=z,this.showMuteButton=x,this.showRecordButton=w,this.showAddCallerButton=j,this.showAddBlindTransferButton=W,this.showMergeButton=q,this.showSwapButton=J})),Et=d()((function t(e){var E=e.phoneNumber,n=e.id,r=e.type,a=e.name,T=e.prefix,o=e.extension,_=e.endpointARN,i=e.queue,s=e.availability,l=e.recordId,A=e.description,c=e.queueWaitTime;L()(this,t),E&&Tt.validateString(E),r&&Tt.validateEnum(r,Object.values(N.CONTACT_TYPE)),n&&Tt.validateString(n),a&&Tt.validateString(a),T&&Tt.validateString(T),o&&Tt.validateString(o),s&&Tt.validateEnum(s,Object.values(N.AGENT_AVAILABILITY)),l&&Tt.validateString(l),A&&Tt.validateString(A),c&&Tt.validateString(c),this.phoneNumber=E,this.id=n,this.type=r,this.name=a,this.prefix=T,this.extension=o,this.endpointARN=_,this.queue=i,N.CONTACT_TYPE.AGENT===this.type?this.availability=s:this.availability=null,this.queueWaitTime=c,this.recordId=l,this.description=A})),nt=d()((function t(e){var E=e.voiceCallId,n=e.participantType,r=e.dialerType,a=void 0===r?k.DIALER_TYPE.NONE:r,T=e.parentId,o=e.isOnHold,_=e.hasSupervisorBargedIn,i=void 0!==_&&_;L()(this,t),E&&Tt.validateString(E),n&&Tt.validateEnum(n,Object.values(N.PARTICIPANT_TYPE)),T&&Tt.validateString(T),void 0!==o&&Tt.validateBoolean(o),Tt.validateBoolean(i),Tt.validateEnum(a,Object.values(N.DIALER_TYPE)),this.voiceCallId=E,this.participantType=n,this.parentId=T,this.isOnHold=o,this.dialerType=a,this.hasSupervisorBargedIn=i})),rt=d()((function t(e){var E=e.callId,n=e.callType,r=e.contact,a=e.state,T=e.callAttributes,o=e.phoneNumber,_=e.callInfo,i=e.reason,s=e.closeCallOnError,l=e.agentStatus;L()(this,t),E&&(Tt.validateString(E),this.callId=E),n&&(Tt.validateEnum(n,Object.values(N.CALL_TYPE)),this.callType=n),o&&(Tt.validateString(o),this.phoneNumber=o),_&&(Tt.validateClassObject(_,et),this.callInfo=_),r&&(Tt.validateClassObject(r,Et),this.contact=r),i&&(this.reason=i),s&&(this.closeCallOnError=s),l&&(this.agentStatus=l),this.state=a,this.callAttributes=T})),at=function(){function t(){L()(this,t)}return d()(t,[{key:"init",value:function(t){throw new Error("Not implemented")}},{key:"getActiveCalls",value:function(){throw new Error("Not implemented")}},{key:"acceptCall",value:function(t){throw new Error("Not implemented")}},{key:"declineCall",value:function(t){throw new Error("Not implemented")}},{key:"endCall",value:function(t,e){throw new Error("Not implemented")}},{key:"mute",value:function(){throw new Error("Not implemented")}},{key:"unmute",value:function(){throw new Error("Not implemented")}},{key:"hold",value:function(t){throw new Error("Not implemented")}},{key:"resume",value:function(t){throw new Error("Not implemented")}},{key:"setAgentStatus",value:function(t,e,E){throw new Error("Not implemented")}},{key:"getAgentStatus",value:function(){this.logMessageToVendor(N.LOG_LEVEL.INFO,"getAgentStatus API is NOT Implemented")}},{key:"dial",value:function(t){throw new Error("Not implemented")}},{key:"sendDigits",value:function(t){throw new Error("Not implemented")}},{key:"getPhoneContacts",value:function(){throw new Error("Not implemented")}},{key:"swap",value:function(t,e){throw new Error("Not implemented")}},{key:"conference",value:function(t){throw new Error("Not implemented")}},{key:"addParticipant",value:function(t,e,E){throw new Error("Not implemented")}},{key:"pauseRecording",value:function(t){throw new Error("Not implemented")}},{key:"resumeRecording",value:function(t){throw new Error("Not implemented")}},{key:"getAgentConfig",value:function(){throw new Error("Not implemented")}},{key:"setAgentConfig",value:function(t){throw new Error("Not implemented")}},{key:"getCapabilities",value:function(){throw new Error("Not implemented")}},{key:"logout",value:function(){throw new Error("Not implemented")}},{key:"handleMessage",value:function(t){throw new Error("Not implemented")}},{key:"wrapUpCall",value:function(t){throw new Error("Not implemented")}},{key:"getSignedRecordingUrl",value:function(t,e,E){throw new Error("Not implemented")}},{key:"downloadLogs",value:function(t){b()}},{key:"logMessageToVendor",value:function(t,e,E){}},{key:"superviseCall",value:function(t){throw new Error("Not implemented")}},{key:"supervisorDisconnect",value:function(t){throw new Error("Not implemented")}},{key:"supervisorBargeIn",value:function(t){throw new Error("Not implemented")}}]),t}(),Tt=function(){function t(){L()(this,t)}return d()(t,null,[{key:"validateString",value:function(t){if("string"!=typeof t)throw new Error("Invalid argument. Expecting a string but got ".concat(_()(t)));return this}},{key:"validateNumber",value:function(t){if("number"!=typeof t)throw new Error("Invalid argument. Expecting a number but got ".concat(_()(t)));return this}},{key:"validateBoolean",value:function(t){if("boolean"!=typeof t)throw new Error("Invalid argument. Expecting a boolean but got ".concat(_()(t)));return this}},{key:"validateEnum",value:function(t,e){if(!new RegExp(e.join("|"),"i").test(t))throw new Error("Invalid argument. Expecting a value from ".concat(JSON.stringify(e)," but got ").concat(t));return this}},{key:"validateDate",value:function(t){if(!(t instanceof Date))throw new Error("Invalid argument. Expecting a Date object but got ".concat(_()(t)));return this}},{key:"validateClassObject",value:function(t,e){if(!(t instanceof e))throw new Error("Invalid className. Expecting object of class ".concat(e," but got ").concat(_()(t)));return this}}]),t}(),ot=d()((function t(e){var E=e.statusId,n=e.statusApiName,r=e.statusName;L()(this,t),Tt.validateString(E),n&&Tt.validateString(n),r&&Tt.validateString(r),this.statusId=E,this.statusApiName=n,this.statusName=r})),_t=d()((function t(e){var E=e.statusId,n=e.statusType,r=e.statusName;L()(this,t),E&&Tt.validateString(E),n&&Tt.validateString(n),r&&Tt.validateString(r),this.statusId=E,this.statusType=n,this.statusName=r})),it=d()((function t(e){var E=e.newVendorStateInfo,n=e.oldVendorStateInfo;L()(this,t),Tt.validateClassObject(E,_t),Tt.validateString(E.statusName),n&&Tt.validateClassObject(n,_t),this.newVendorStateInfo=E,this.oldVendorStateInfo=n})),st=d()((function t(e){var E=e.callId,n=e.voiceCallId,r=e.callType,a=e.from,T=e.to,o=e.supervisorName,_=e.isBargedIn;L()(this,t),Tt.validateString(E),this.callId=E,this.voiceCallId=n,this.callType=r,this.from=a,this.to=T,this.supervisorName=o,this.isBargedIn=_})),Nt=d()((function t(e){var E=e.callId,n=e.stats,r=e.isAudioStatsCompleted;L()(this,t),E&&(Tt.validateString(E),this.callId=E),n&&(Tt.validateClassObject(n,Array),n.forEach((function(t){return Tt.validateClassObject(t,lt)})),this.stats=n),r&&(Tt.validateBoolean(r),this.isAudioStatsCompleted=r)})),lt=d()((function t(e){var E=e.inputChannelStats,n=e.outputChannelStats;L()(this,t),E&&Tt.validateClassObject(E,At),n&&Tt.validateClassObject(n,At),this.inputChannelStats=E,this.outputChannelStats=n})),At=d()((function t(e){var E=e.packetsCount,n=e.packetsLost,r=e.jitterBufferMillis,a=e.roundTripTimeMillis;L()(this,t),E=null==E||E<0?0:E,n=null==n||n<0?0:n,r=null==r||r<0?0:r,a=null==a||a<0?0:a,this.statsCount=0,this.packetsCount=E,this.packetsLost=n,this.jitterBufferMillis=r,this.roundTripTimeMillis=a})),ct=d()((function t(e){var E=e.call;L()(this,t),Tt.validateClassObject(E,rt),this.call=E})),ut=function(t){R()(E,t);var e=Y(E);function E(t){var n=t.calls;return L()(this,E),e.call(this,{calls:n})}return d()(E)}(J),Rt=!1;function Ot(t){var e=function(t){var e=g[t];return{packetsCount:e.packetsCount/e.statsCount,packetsLost:e.packetsLost/e.statsCount,jitterBufferMillis:e.jitterBufferMillis/e.statsCount,roundTripTimeMillis:e.roundTripTimeMillis/e.statsCount}}(t),E=e.roundTripTimeMillis+2*e.jitterBufferMillis+10,n=0;return n=E<160?93.2-E/40:93.2-(E-120)/10,1+.035*(n-=e.packetsLost/e.packetsCount*2.5)+7e-6*n*(n-60)*(100-n)}function Pt(){Rt=!0}function Ct(){if(Rt&&g){var t=Ot("inputChannelStats"),e=Ot("outputChannelStats");return g=null,isNaN(e)&&isNaN(t)?0:isNaN(e)?t:isNaN(t)?e:Math.min(t,e)}}function St(){g=new lt({inputChannelStats:new At({packetsCount:0,packetsLost:0,jitterBufferMillis:0,roundTripTimeMillis:0}),outputChannelStats:new At({packetsCount:0,packetsLost:0,jitterBufferMillis:0,roundTripTimeMillis:0})})}function It(t){g&&t.forEach((function(t){t.inputChannelStats&&(g.inputChannelStats.statsCount++,g.inputChannelStats.packetsCount+=0|t.inputChannelStats.packetsCount,g.inputChannelStats.packetsLost+=0|t.inputChannelStats.packetsLost,g.inputChannelStats.jitterBufferMillis+=0|t.inputChannelStats.jitterBufferMillis,g.inputChannelStats.roundTripTimeMillis+=0|t.inputChannelStats.roundTripTimeMillis),t.outputChannelStats&&(g.outputChannelStats.statsCount++,g.outputChannelStats.packetsCount+=0|t.outputChannelStats.packetsCount,g.outputChannelStats.packetsLost+=0|t.outputChannelStats.packetsLost,g.outputChannelStats.jitterBufferMillis+=0|t.outputChannelStats.jitterBufferMillis,g.outputChannelStats.roundTripTimeMillis+=0|t.outputChannelStats.roundTripTimeMillis)}))}function dt(t){return t&&t.type?t.type:t}function pt(t){return t&&t.message?t.message:t}function Lt(t,e,E){var n=function t(e){if(e){if("function"==typeof e)return;if("object"===_()(e)){var E=Array.isArray(e),n=E?[]:{};if(E)e.forEach((function(e){n.push(t(e))}));else for(var r in e)"phoneNumber"!==r&&"number"!==r&&"name"!==r&&"callAttributes"!==r&&(n[r]=t(e[r]));return n}}return e}(e);G({eventType:t,payload:e},E?N.LOG_LEVEL.ERROR:N.LOG_LEVEL.INFO,N.LOG_SOURCE.SYSTEM),y.postMessage({type:N.MESSAGE_TYPE.LOG,payload:{eventType:t,payload:n,isError:E}})}function ft(t,e){var E=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];y.postMessage({type:N.MESSAGE_TYPE.TELEPHONY_EVENT_DISPATCHED,payload:{telephonyEventType:t,telephonyEventPayload:e}}),E&&Lt(t,e,!1)}function ht(t,e,E){console.error("SCV dispatched error ".concat(t," for eventType ").concat(E),e),ft(N.EVENT_TYPE.ERROR,{message:N.ERROR_TYPE[t]},!1),Lt(E,{errorType:t,error:e},!0)}function vt(t,e){console.info("SCV info message dispatched for eventType ".concat(t," with payload ").concat(JSON.stringify(e))),ft(N.EVENT_TYPE.INFO,{message:N.INFO_TYPE[t]},!1),Lt(t,e,!1)}function Gt(){return Dt.apply(this,arguments)}function Dt(){return(Dt=T()(s.a.mark((function t(){var e,E,n,a,T,o,_,i;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,m.getAgentConfig();case 3:return n=t.sent,t.next=6,m.getCapabilities();case 6:return a=t.sent,Tt.validateClassObject(n,j),Tt.validateClassObject(a,B),a.supportsMos&&Pt(),t.next=12,m.getActiveCalls();case 12:T=t.sent,Tt.validateClassObject(T,w),o=T.activeCalls,_=N.MESSAGE_TYPE.CONNECTOR_READY,i={agentConfig:(e={},r()(e,N.AGENT_CONFIG_TYPE.PHONES,n.phones),r()(e,N.AGENT_CONFIG_TYPE.SELECTED_PHONE,n.selectedPhone),e),capabilities:(E={},r()(E,N.CAPABILITIES_TYPE.MUTE,a.hasMute),r()(E,N.CAPABILITIES_TYPE.RECORD,a.hasRecord),r()(E,N.CAPABILITIES_TYPE.MERGE,a.hasMerge),r()(E,N.CAPABILITIES_TYPE.SWAP,a.hasSwap),r()(E,N.CAPABILITIES_TYPE.SIGNED_RECORDING_URL,a.hasSignedRecordingUrl),r()(E,N.CAPABILITIES_TYPE.DEBUG_ENABLED,a.debugEnabled),r()(E,N.CAPABILITIES_TYPE.CONTACT_SEARCH,a.hasContactSearch),r()(E,N.CAPABILITIES_TYPE.VENDOR_PROVIDED_AVAILABILITY,a.hasAgentAvailability),r()(E,N.CAPABILITIES_TYPE.VENDOR_PROVIDED_QUEUE_WAIT_TIME,a.hasQueueWaitTime),r()(E,N.CAPABILITIES_TYPE.SUPERVISOR_LISTEN_IN,a.hasSupervisorListenIn),r()(E,N.CAPABILITIES_TYPE.SUPERVISOR_BARGE_IN,a.hasSupervisorBargeIn),r()(E,N.CAPABILITIES_TYPE.MOS,a.supportsMos),r()(E,N.CAPABILITIES_TYPE.BLIND_TRANSFER,a.hasBlindTransfer),r()(E,N.CAPABILITIES_TYPE.TRANSFER_TO_OMNI_FLOW,a.hasTransferToOmniFlow),r()(E,N.CAPABILITIES_TYPE.PENDING_STATUS_CHANGE,a.hasPendingStatusChange),E),callInProgress:o.length>0?o[0]:null},y.postMessage({type:_,payload:i}),Lt(_,i,!1),t.next=25;break;case 21:t.prev=21,t.t0=t.catch(0),y.postMessage({type:N.MESSAGE_TYPE.CONNECTOR_READY,payload:{}}),Lt(N.MESSAGE_TYPE.CONNECTOR_READY,{},!1);case 25:case"end":return t.stop()}}),t,null,[[0,21]])})))).apply(this,arguments)}function bt(t){return Yt.apply(this,arguments)}function Yt(){return(Yt=T()(s.a.mark((function t(e){var E,n,r,a,T,o,_,i,l,A,c,u,R,O,P,C,S,I,d,p,L,f,h,v,G,b,Y,U,V,g,y,k,x,H,B,j,F,W,Q,X,$,et,nt,rt,at,ot,it,st,Nt,lt,At,Rt;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:(E=e.data.type)!==N.MESSAGE_TYPE.LOG&&Lt(E,e.data,!1),t.t0=E,t.next=t.t0===N.MESSAGE_TYPE.ACCEPT_CALL?5:t.t0===N.MESSAGE_TYPE.DECLINE_CALL?29:t.t0===N.MESSAGE_TYPE.END_CALL?42:t.t0===N.MESSAGE_TYPE.MUTE?60:t.t0===N.MESSAGE_TYPE.UNMUTE?71:t.t0===N.MESSAGE_TYPE.HOLD?82:t.t0===N.MESSAGE_TYPE.RESUME?99:t.t0===N.MESSAGE_TYPE.SET_AGENT_STATUS?116:t.t0===N.MESSAGE_TYPE.GET_AGENT_STATUS?138:t.t0===N.MESSAGE_TYPE.DIAL?150:t.t0===N.MESSAGE_TYPE.SEND_DIGITS?172:t.t0===N.MESSAGE_TYPE.GET_PHONE_CONTACTS?181:t.t0===N.MESSAGE_TYPE.SWAP_PARTICIPANTS?194:t.t0===N.MESSAGE_TYPE.CONFERENCE?205:t.t0===N.MESSAGE_TYPE.ADD_PARTICIPANT?216:t.t0===N.MESSAGE_TYPE.PAUSE_RECORDING?235:t.t0===N.MESSAGE_TYPE.RESUME_RECORDING?246:t.t0===N.MESSAGE_TYPE.LOGOUT?257:t.t0===N.MESSAGE_TYPE.MESSAGE?270:t.t0===N.MESSAGE_TYPE.WRAP_UP_CALL?272:t.t0===N.MESSAGE_TYPE.AGENT_AVAILABLE?274:t.t0===N.MESSAGE_TYPE.SET_AGENT_CONFIG?314:t.t0===N.MESSAGE_TYPE.GET_SIGNED_RECORDING_URL?326:t.t0===N.MESSAGE_TYPE.DOWNLOAD_VENDOR_LOGS?341:t.t0===N.MESSAGE_TYPE.LOG?343:t.t0===N.MESSAGE_TYPE.SUPERVISE_CALL?346:t.t0===N.MESSAGE_TYPE.SUPERVISOR_DISCONNECT?363:t.t0===N.MESSAGE_TYPE.SUPERVISOR_BARGE_IN?376:388;break;case 5:if(t.prev=5,!e.data.call||!e.data.call.callType||e.data.call.callType.toLowerCase()!==N.CALL_TYPE.OUTBOUND.toLowerCase()){t.next=8;break}return t.abrupt("return");case 8:if(St(),!M){t.next=16;break}return t.next=12,m.supervisorDisconnect();case 12:n=t.sent,Tt.validateClassObject(n,ut),M=!1,ft(N.EVENT_TYPE.SUPERVISOR_HANGUP,n.calls);case 16:return t.next=18,m.acceptCall(e.data.call);case 18:r=t.sent,Tt.validateClassObject(r,K),ft((a=r.call).callType.toLowerCase()===N.CALL_TYPE.CALLBACK.toLowerCase()?N.EVENT_TYPE.CALL_STARTED:N.EVENT_TYPE.CALL_CONNECTED,a),t.next=28;break;case 24:t.prev=24,t.t1=t.catch(5),M=!1,vt(N.INFO_TYPE.CAN_NOT_ACCEPT_THE_CALL,{messagetype:N.MESSAGE_TYPE.ACCEPT_CALL,additionalInfo:t.t1});case 28:return t.abrupt("break",389);case 29:return t.prev=29,t.next=32,m.declineCall(e.data.call);case 32:T=t.sent,Tt.validateClassObject(T,K),o=T.call,ft(N.EVENT_TYPE.HANGUP,o),t.next=41;break;case 38:t.prev=38,t.t2=t.catch(29),ht(N.ERROR_TYPE.CAN_NOT_DECLINE_THE_CALL,t.t2,N.MESSAGE_TYPE.DECLINE_CALL);case 41:return t.abrupt("break",389);case 42:return t.prev=42,t.next=45,m.endCall(e.data.call,e.data.agentStatus);case 45:return _=t.sent,Tt.validateClassObject(_,J),t.next=49,m.getActiveCalls();case 49:i=t.sent,Tt.validateClassObject(i,w),l=i.activeCalls,A=_.calls,0===l.length?ft(N.EVENT_TYPE.HANGUP,A):ft(N.EVENT_TYPE.PARTICIPANT_REMOVED,A.length>0&&A[0]),t.next=59;break;case 56:t.prev=56,t.t3=t.catch(42),ht(N.ERROR_TYPE.CAN_NOT_END_THE_CALL,t.t3,N.MESSAGE_TYPE.END_CALL);case 59:return t.abrupt("break",389);case 60:return t.prev=60,t.next=63,m.mute();case 63:c=t.sent,xt({eventType:N.EVENT_TYPE.MUTE_TOGGLE,payload:c}),t.next=70;break;case 67:t.prev=67,t.t4=t.catch(60),ht(N.ERROR_TYPE.CAN_NOT_MUTE_CALL,t.t4,N.MESSAGE_TYPE.MUTE);case 70:return t.abrupt("break",389);case 71:return t.prev=71,t.next=74,m.unmute();case 74:u=t.sent,xt({eventType:N.EVENT_TYPE.MUTE_TOGGLE,payload:u}),t.next=81;break;case 78:t.prev=78,t.t5=t.catch(71),ht(N.ERROR_TYPE.CAN_NOT_UNMUTE_CALL,t.t5,N.MESSAGE_TYPE.UNMUTE);case 81:return t.abrupt("break",389);case 82:return t.prev=82,t.next=85,m.hold(e.data.call);case 85:R=t.sent,xt({eventType:N.EVENT_TYPE.HOLD_TOGGLE,payload:R}),t.next=98;break;case 89:t.prev=89,t.t6=t.catch(82),t.t7=dt(t.t6),t.next=t.t7===N.ERROR_TYPE.INVALID_PARTICIPANT?94:96;break;case 94:return ht(N.ERROR_TYPE.INVALID_PARTICIPANT,pt(t.t6),N.MESSAGE_TYPE.HOLD),t.abrupt("break",98);case 96:return ht(N.ERROR_TYPE.CAN_NOT_HOLD_CALL,pt(t.t6),N.MESSAGE_TYPE.HOLD),t.abrupt("break",98);case 98:return t.abrupt("break",389);case 99:return t.prev=99,t.next=102,m.resume(e.data.call);case 102:O=t.sent,xt({eventType:N.EVENT_TYPE.HOLD_TOGGLE,payload:O}),t.next=115;break;case 106:t.prev=106,t.t8=t.catch(99),t.t9=dt(t.t8),t.next=t.t9===N.ERROR_TYPE.INVALID_PARTICIPANT?111:113;break;case 111:return ht(N.ERROR_TYPE.INVALID_PARTICIPANT,pt(t.t8),N.MESSAGE_TYPE.RESUME),t.abrupt("break",115);case 113:return ht(N.ERROR_TYPE.CAN_NOT_RESUME_CALL,pt(t.t8),N.MESSAGE_TYPE.RESUME),t.abrupt("break",115);case 115:return t.abrupt("break",389);case 116:return t.prev=116,P=e.data.statusInfo||{},C=e.data.enqueueNextState||!1,t.next=121,m.setAgentStatus(e.data.agentStatus,P,C);case 121:S=t.sent,Tt.validateClassObject(S,Z),I=S.success,ft(N.EVENT_TYPE.SET_AGENT_STATUS_RESULT,{success:I}),t.next=137;break;case 127:t.prev=127,t.t10=t.catch(116),e.data.statusInfo&&ft(N.EVENT_TYPE.SET_AGENT_STATUS_RESULT,{success:!1}),t.t11=dt(t.t10),t.next=t.t11===N.ERROR_TYPE.INVALID_AGENT_STATUS?133:135;break;case 133:return ht(N.ERROR_TYPE.INVALID_AGENT_STATUS,pt(t.t10),N.MESSAGE_TYPE.SET_AGENT_STATUS),t.abrupt("break",137);case 135:return ht(N.ERROR_TYPE.CAN_NOT_SET_AGENT_STATUS,pt(t.t10),N.MESSAGE_TYPE.SET_AGENT_STATUS),t.abrupt("break",137);case 137:return t.abrupt("break",389);case 138:return t.prev=138,t.next=141,m.getAgentStatus();case 141:d=t.sent,Tt.validateClassObject(d,_t),ft(N.EVENT_TYPE.GET_AGENT_STATUS_RESULT,d),t.next=149;break;case 146:t.prev=146,t.t12=t.catch(138),ht(N.ERROR_TYPE.CAN_NOT_GET_AGENT_STATUS,pt(t.t12),N.MESSAGE_TYPE.GET_AGENT_STATUS);case 149:return t.abrupt("break",389);case 150:return t.prev=150,t.next=153,m.dial(new Et(e.data.contact));case 153:p=t.sent,Tt.validateClassObject(p,K),L=p.call,ft(N.EVENT_TYPE.CALL_STARTED,L),t.next=171;break;case 159:t.prev=159,t.t13=t.catch(150),ft(N.EVENT_TYPE.CALL_FAILED),t.t14=dt(t.t13),t.next=t.t14===N.ERROR_TYPE.INVALID_DESTINATION?165:t.t14===N.ERROR_TYPE.GENERIC_ERROR?167:169;break;case 165:return ht(N.ERROR_TYPE.INVALID_DESTINATION,pt(t.t13),N.MESSAGE_TYPE.DIAL),t.abrupt("break",171);case 167:return ht(N.ERROR_TYPE.GENERIC_ERROR,pt(t.t13),N.MESSAGE_TYPE.DIAL),t.abrupt("break",171);case 169:return ht(N.ERROR_TYPE.CAN_NOT_START_THE_CALL,pt(t.t13),N.MESSAGE_TYPE.DIAL),t.abrupt("break",171);case 171:return t.abrupt("break",389);case 172:return t.prev=172,t.next=175,m.sendDigits(e.data.digits);case 175:t.next=180;break;case 177:t.prev=177,t.t15=t.catch(172),Lt(N.MESSAGE_TYPE.SEND_DIGITS,e.data.digits,!0);case 180:return t.abrupt("break",389);case 181:return t.prev=181,t.next=184,m.getPhoneContacts(e.data.filter);case 184:f=t.sent,Tt.validateClassObject(f,q),h=f.contacts.map((function(t){return{id:t.id,type:t.type,name:t.name,phoneNumber:t.phoneNumber,prefix:t.prefix,extension:t.extension,endpointARN:t.endpointARN,queue:t.queue,availability:t.availability,queueWaitTime:t.queueWaitTime,recordId:t.recordId,description:t.description}})),ft(N.EVENT_TYPE.PHONE_CONTACTS,{contacts:h,contactTypes:f.contactTypes}),t.next=193;break;case 190:t.prev=190,t.t16=t.catch(181),ht(N.ERROR_TYPE.CAN_NOT_GET_PHONE_CONTACTS,t.t16,N.MESSAGE_TYPE.GET_PHONE_CONTACTS);case 193:return t.abrupt("break",389);case 194:return t.prev=194,t.next=197,m.swap(e.data.callToHold,e.data.callToResume);case 197:v=t.sent,xt({eventType:N.EVENT_TYPE.PARTICIPANTS_SWAPPED,payload:v}),t.next=204;break;case 201:t.prev=201,t.t17=t.catch(194),ht(N.ERROR_TYPE.CAN_NOT_SWAP_PARTICIPANTS,t.t17,N.MESSAGE_TYPE.SWAP_PARTICIPANTS);case 204:return t.abrupt("break",389);case 205:return t.prev=205,t.next=208,m.conference(e.data.calls);case 208:G=t.sent,xt({eventType:N.EVENT_TYPE.PARTICIPANTS_CONFERENCED,payload:G}),t.next=215;break;case 212:t.prev=212,t.t18=t.catch(205),ht(N.ERROR_TYPE.CAN_NOT_CONFERENCE,t.t18,N.MESSAGE_TYPE.CONFERENCE);case 215:return t.abrupt("break",389);case 216:return t.prev=216,t.next=219,m.addParticipant(new Et(e.data.contact),e.data.call,e.data.isBlindTransfer);case 219:b=t.sent,xt({eventType:N.EVENT_TYPE.PARTICIPANT_ADDED,payload:b}),e.data.isBlindTransfer&&ft(N.EVENT_TYPE.HANGUP,e.data.call),t.next=234;break;case 224:t.prev=224,t.t19=t.catch(216),ft(N.EVENT_TYPE.PARTICIPANT_REMOVED,{reason:N.EVENT_TYPE.ERROR.toLowerCase()}),t.t20=dt(t.t19),t.next=t.t20===N.ERROR_TYPE.INVALID_DESTINATION?230:232;break;case 230:return ht(N.ERROR_TYPE.INVALID_DESTINATION,pt(t.t19),N.MESSAGE_TYPE.ADD_PARTICIPANT),t.abrupt("break",234);case 232:return ht(N.ERROR_TYPE.CAN_NOT_ADD_PARTICIPANT,pt(t.t19),N.MESSAGE_TYPE.ADD_PARTICIPANT),t.abrupt("break",234);case 234:return t.abrupt("break",389);case 235:return t.prev=235,t.next=238,m.pauseRecording(e.data.call);case 238:Y=t.sent,xt({eventType:N.EVENT_TYPE.RECORDING_TOGGLE,payload:Y}),t.next=245;break;case 242:t.prev=242,t.t21=t.catch(235),ht(N.ERROR_TYPE.CAN_NOT_PAUSE_RECORDING,t.t21,N.MESSAGE_TYPE.PAUSE_RECORDING);case 245:return t.abrupt("break",389);case 246:return t.prev=246,t.next=249,m.resumeRecording(e.data.call);case 249:U=t.sent,xt({eventType:N.EVENT_TYPE.RECORDING_TOGGLE,payload:U}),t.next=256;break;case 253:t.prev=253,t.t22=t.catch(246),ht(N.ERROR_TYPE.CAN_NOT_RESUME_RECORDING,t.t22,N.MESSAGE_TYPE.RESUME_RECORDING);case 256:return t.abrupt("break",389);case 257:return t.prev=257,t.next=260,m.logout();case 260:V=t.sent,Tt.validateClassObject(V,tt),g=V.success,y=V.loginFrameHeight,ft(N.EVENT_TYPE.LOGOUT_RESULT,{success:g,loginFrameHeight:y}),t.next=269;break;case 266:t.prev=266,t.t23=t.catch(257),ht(N.ERROR_TYPE.CAN_NOT_LOG_OUT,t.t23,N.MESSAGE_TYPE.LOGOUT);case 269:return t.abrupt("break",389);case 270:return m.handleMessage(e.data.message),t.abrupt("break",389);case 272:return m.wrapUpCall(e.data.call),t.abrupt("break",389);case 274:if(!e.data.isAvailable){t.next=313;break}return t.next=278,m.getActiveCalls();case 278:k=t.sent,Tt.validateClassObject(k,w),x=k.activeCalls,t.t24=s.a.keys(x);case 282:if((t.t25=t.t24()).done){t.next=313;break}if(H=t.t25.value,B=x[H],j=!B.callInfo||B.callInfo.isReplayable,F=B.callAttributes&&B.callAttributes.participantType===N.PARTICIPANT_TYPE.SUPERVISOR,W=F&&B.callAttributes&&B.callAttributes.hasSupervisorBargedIn,!j){t.next=311;break}B.isReplayedCall=!0,t.t26=B.state,t.next=t.t26===N.CALL_STATE.CONNECTED?293:t.t26===N.CALL_STATE.RINGING?300:t.t26===N.CALL_STATE.TRANSFERRING?306:t.t26===N.CALL_STATE.TRANSFERRED?308:310;break;case 293:if(!F){t.next=298;break}return M=!0,ft(N.EVENT_TYPE.SUPERVISOR_CALL_CONNECTED,B),W&&ft(N.EVENT_TYPE.SUPERVISOR_BARGED_IN,B),t.abrupt("break",311);case 298:return ft(N.EVENT_TYPE.CALL_CONNECTED,B),t.abrupt("break",311);case 300:if(!F){t.next=304;break}return M=!0,ft(N.EVENT_TYPE.SUPERVISOR_CALL_STARTED,B),t.abrupt("break",311);case 304:return ft(N.EVENT_TYPE.CALL_STARTED,B),t.abrupt("break",311);case 306:return ft(N.EVENT_TYPE.PARTICIPANT_ADDED,{phoneNumber:B.contact.phoneNumber,callInfo:B.callInfo,initialCallHasEnded:B.callAttributes.initialCallHasEnded,callId:B.callId}),t.abrupt("break",311);case 308:return ft(N.EVENT_TYPE.PARTICIPANT_CONNECTED,{phoneNumber:B.contact.phoneNumber,callInfo:B.callInfo,initialCallHasEnded:B.callAttributes.initialCallHasEnded,callId:B.callId}),t.abrupt("break",311);case 310:return t.abrupt("break",311);case 311:t.next=282;break;case 313:return t.abrupt("break",389);case 314:return t.prev=314,t.next=317,m.setAgentConfig(e.data.config);case 317:Q=t.sent,Tt.validateClassObject(Q,Z),ft(N.EVENT_TYPE.AGENT_CONFIG_UPDATED,Q),t.next=325;break;case 322:t.prev=322,t.t27=t.catch(314),ht(dt(t.t27)===N.ERROR_TYPE.CAN_NOT_UPDATE_PHONE_NUMBER?N.ERROR_TYPE.CAN_NOT_UPDATE_PHONE_NUMBER:N.ERROR_TYPE.CAN_NOT_SET_AGENT_CONFIG,pt(t.t27),N.MESSAGE_TYPE.SET_AGENT_CONFIG);case 325:return t.abrupt("break",389);case 326:return t.prev=326,X=e.data,$=X.recordingUrl,et=X.vendorCallKey,nt=X.callId,t.next=330,m.getSignedRecordingUrl($,et,nt);case 330:rt=t.sent,Tt.validateClassObject(rt,z),ft(N.EVENT_TYPE.SIGNED_RECORDING_URL,rt),t.next=340;break;case 335:t.prev=335,t.t28=t.catch(326),at=new z({success:!1}),ft(N.EVENT_TYPE.SIGNED_RECORDING_URL,at,!1),Lt(N.MESSAGE_TYPE.GET_SIGNED_RECORDING_URL,at,!0);case 340:return t.abrupt("break",389);case 341:return m.downloadLogs(D()),t.abrupt("break",389);case 343:return ot=e.data,it=ot.logLevel,st=ot.logMessage,Nt=ot.payload,m.logMessageToVendor(it,st,Nt),t.abrupt("break",389);case 346:return t.prev=346,M=!0,t.next=350,m.superviseCall(e.data.call);case 350:return lt=t.sent,Tt.validateClassObject(lt,ct),t.next=354,m.getAgentConfig();case 354:t.sent.selectedPhone.type===N.PHONE_TYPE.SOFT_PHONE?ft(N.EVENT_TYPE.SUPERVISOR_CALL_CONNECTED,lt.call):ft(N.EVENT_TYPE.SUPERVISOR_CALL_STARTED,lt.call),t.next=362;break;case 358:t.prev=358,t.t29=t.catch(346),M=!1,ht(N.ERROR_TYPE.CAN_NOT_SUPERVISE_CALL,t.t29,N.MESSAGE_TYPE.SUPERVISE_CALL);case 362:return t.abrupt("break",389);case 363:return t.prev=363,t.next=366,m.supervisorDisconnect(e.data.call);case 366:At=t.sent,Tt.validateClassObject(At,ut),M=!1,ft(N.EVENT_TYPE.SUPERVISOR_HANGUP,At.calls),t.next=375;break;case 372:t.prev=372,t.t30=t.catch(363),ht(N.ERROR_TYPE.CAN_NOT_DISCONNECT_SUPERVISOR,t.t30,N.MESSAGE_TYPE.SUPERVISOR_DISCONNECT);case 375:return t.abrupt("break",389);case 376:return t.prev=376,t.next=379,m.supervisorBargeIn(e.data.call);case 379:Rt=t.sent,Tt.validateClassObject(Rt,ct),ft(N.EVENT_TYPE.SUPERVISOR_BARGED_IN,Rt.call),t.next=387;break;case 384:t.prev=384,t.t31=t.catch(376),ht(N.ERROR_TYPE.CAN_NOT_BARGE_IN_SUPERVISOR,t.t31,N.MESSAGE_TYPE.SUPERVISOR_BARGE_IN);case 387:case 388:return t.abrupt("break",389);case 389:case"end":return t.stop()}}),t,null,[[5,24],[29,38],[42,56],[60,67],[71,78],[82,89],[99,106],[116,127],[138,146],[150,159],[172,177],[181,190],[194,201],[205,212],[216,224],[235,242],[246,253],[257,266],[314,322],[326,335],[346,358],[363,372],[376,384]])})))).apply(this,arguments)}function Ut(t){return Vt.apply(this,arguments)}function Vt(){return(Vt=T()(s.a.mark((function t(e){var E,n,r,a;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.t0=e.data.type,t.next=t.t0===N.MESSAGE_TYPE.SETUP_CONNECTOR?3:29;break;case 3:if(E=/^https:\/\/[\w-.]+(lightning\.[\w]+\.soma\.force\.com|\.lightning\.force\.com|\.lightning\.pc-rnd\.force\.com|\.stm\.force\.com|\.salesforce\.com|\.my\.salesforce-sites\.com|\.lightning\.localhost\.[\w]+\.force.com)$/,n=new URL(e.origin),r=n.protocol+"//"+n.hostname,!E.test(r)){t.next=27;break}return(y=e.ports[0]).onmessage=bt,Lt(N.MESSAGE_TYPE.SETUP_CONNECTOR,gt(e.data.connectorConfig),!1),t.prev=10,t.next=13,m.init(e.data.connectorConfig);case 13:a=t.sent,Tt.validateClassObject(a,$),a.showLogin?ft(N.EVENT_TYPE.SHOW_LOGIN,{loginFrameHeight:a.loginFrameHeight}):Gt(),t.next=27;break;case 18:t.prev=18,t.t1=t.catch(10),t.t2=dt(t.t1),t.next=t.t2===N.ERROR_TYPE.INVALID_PARAMS?23:25;break;case 23:return ht(N.ERROR_TYPE.INVALID_PARAMS,pt(t.t1),N.MESSAGE_TYPE.SETUP_CONNECTOR),t.abrupt("break",27);case 25:return ht(N.ERROR_TYPE.CAN_NOT_LOG_IN,pt(t.t1),N.MESSAGE_TYPE.SETUP_CONNECTOR),t.abrupt("break",27);case 27:return window.removeEventListener("message",Ut),t.abrupt("break",30);case 29:return t.abrupt("break",30);case 30:case"end":return t.stop()}}),t,null,[[10,18]])})))).apply(this,arguments)}function gt(t){t=t||{};var e={};return l.forEach((function(E){t.hasOwnProperty(E)&&(e[E]=t[E])})),A.forEach((function(E){Object.keys(t).forEach((function(n){n.startsWith(E)&&!c.includes(n)&&(e[n]=t[n])}))})),e}function yt(t,e,E,n){try{return Tt.validateClassObject(t,e),!0}catch(t){return E&&ht(E,t,n),!1}}function mt(t){m=t,window.addEventListener("message",Ut)}function Mt(t){Lt(t.eventType,t.payload,t.isError)}function kt(t){var e=t.eventType,E=t.error;switch(e){case N.EVENT_TYPE.LOGIN_RESULT:ht(N.ERROR_TYPE.CAN_NOT_LOG_IN,E,N.EVENT_TYPE.LOGIN_RESULT);break;case N.EVENT_TYPE.LOGOUT_RESULT:ht(N.ERROR_TYPE.CAN_NOT_LOG_OUT,E,N.EVENT_TYPE.LOGOUT_RESULT);break;case N.EVENT_TYPE.CALL_STARTED:ht(N.ERROR_TYPE.CAN_NOT_START_THE_CALL,E,N.EVENT_TYPE.CALL_STARTED);break;case N.EVENT_TYPE.QUEUED_CALL_STARTED:ht(N.ERROR_TYPE.CAN_NOT_START_THE_CALL,E,N.EVENT_TYPE.QUEUED_CALL_STARTED);break;case N.EVENT_TYPE.CALL_CONNECTED:ht(N.ERROR_TYPE.CAN_NOT_START_THE_CALL,E,N.EVENT_TYPE.CALL_CONNECTED);break;case N.EVENT_TYPE.HANGUP:ht(N.ERROR_TYPE.CAN_NOT_END_THE_CALL,E,N.EVENT_TYPE.HANGUP);break;case N.EVENT_TYPE.PARTICIPANT_ADDED:ht(dt(E)===N.ERROR_TYPE.INVALID_PARTICIPANT?N.ERROR_TYPE.INVALID_PARTICIPANT:N.ERROR_TYPE.CAN_NOT_ADD_PARTICIPANT,E,N.EVENT_TYPE.PARTICIPANT_ADDED);break;case N.EVENT_TYPE.PARTICIPANT_CONNECTED:ht(N.ERROR_TYPE.CAN_NOT_CONNECT_PARTICIPANT,E,N.EVENT_TYPE.PARTICIPANT_CONNECTED);break;case N.EVENT_TYPE.PARTICIPANT_REMOVED:ht(N.ERROR_TYPE.CAN_NOT_HANGUP_PARTICIPANT,E,N.EVENT_TYPE.PARTICIPANT_REMOVED);break;case N.EVENT_TYPE.MUTE_TOGGLE:ht(N.ERROR_TYPE.CAN_NOT_TOGGLE_MUTE,E,N.EVENT_TYPE.MUTE_TOGGLE);break;case N.EVENT_TYPE.HOLD_TOGGLE:ht(dt(E)===N.ERROR_TYPE.INVALID_PARTICIPANT?N.ERROR_TYPE.INVALID_PARTICIPANT:N.ERROR_TYPE.CAN_NOT_TOGGLE_HOLD,E,N.EVENT_TYPE.HOLD_TOGGLE);break;case N.EVENT_TYPE.RECORDING_TOGGLE:ht(N.ERROR_TYPE.CAN_NOT_TOGGLE_RECORD,E,N.EVENT_TYPE.RECORDING_TOGGLE);break;case N.EVENT_TYPE.PARTICIPANTS_SWAPPED:ht(N.ERROR_TYPE.CAN_NOT_SWAP_PARTICIPANTS,E,N.EVENT_TYPE.PARTICIPANTS_SWAPPED);break;case N.EVENT_TYPE.PARTICIPANTS_CONFERENCED:ht(N.ERROR_TYPE.CAN_NOT_CONFERENCE,E,N.EVENT_TYPE.PARTICIPANTS_CONFERENCED);break;case N.EVENT_TYPE.AGENT_ERROR:ht(N.ERROR_TYPE.AGENT_ERROR,E,N.EVENT_TYPE.AGENT_ERROR);break;case N.EVENT_TYPE.SOFTPHONE_ERROR:switch(dt(E)){case N.ERROR_TYPE.UNSUPPORTED_BROWSER:ht(N.ERROR_TYPE.UNSUPPORTED_BROWSER,E,N.EVENT_TYPE.SOFTPHONE_ERROR);break;case N.ERROR_TYPE.MICROPHONE_NOT_SHARED:ht(N.ERROR_TYPE.MICROPHONE_NOT_SHARED,E,N.EVENT_TYPE.SOFTPHONE_ERROR);break;default:ht(N.ERROR_TYPE.GENERIC_ERROR,E,N.EVENT_TYPE.SOFTPHONE_ERROR)}break;default:console.error("Unhandled error scenario with arguments ",arguments)}}function xt(t){return Ht.apply(this,arguments)}function Ht(){return(Ht=T()(s.a.mark((function t(e){var E,n,r,a,T,o,_,i,l,A,c,u,R,O,P,C,S,I,d,p,L,f,h,v,G,D,b,Y,U,V,g,y,k;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:E=e.eventType,n=e.payload,r=e.registerLog,a=void 0===r||r,t.t0=E,t.next=t.t0===N.EVENT_TYPE.LOGIN_RESULT?4:t.t0===N.EVENT_TYPE.LOGOUT_RESULT?6:t.t0===N.EVENT_TYPE.CALL_STARTED?8:t.t0===N.EVENT_TYPE.QUEUED_CALL_STARTED?10:t.t0===N.EVENT_TYPE.CALL_CONNECTED?12:t.t0===N.EVENT_TYPE.HANGUP?25:t.t0===N.EVENT_TYPE.PARTICIPANT_ADDED?27:t.t0===N.EVENT_TYPE.PARTICIPANT_CONNECTED?29:t.t0===N.EVENT_TYPE.PARTICIPANT_REMOVED?31:t.t0===N.EVENT_TYPE.MESSAGE?38:t.t0===N.EVENT_TYPE.AFTER_CALL_WORK_STARTED?40:t.t0===N.EVENT_TYPE.WRAP_UP_ENDED?42:t.t0===N.EVENT_TYPE.REMOTE_CONTROLLER?44:t.t0===N.EVENT_TYPE.MUTE_TOGGLE?46:t.t0===N.EVENT_TYPE.HOLD_TOGGLE?48:t.t0===N.EVENT_TYPE.RECORDING_TOGGLE?51:t.t0===N.EVENT_TYPE.PARTICIPANTS_SWAPPED?54:t.t0===N.EVENT_TYPE.PARTICIPANTS_CONFERENCED?56:t.t0===N.EVENT_TYPE.UPDATE_AUDIO_STATS?58:t.t0===N.EVENT_TYPE.SUPERVISOR_BARGED_IN?60:t.t0===N.EVENT_TYPE.CALL_BARGED_IN?62:t.t0===N.EVENT_TYPE.SUPERVISOR_CALL_STARTED?64:t.t0===N.EVENT_TYPE.SUPERVISOR_CALL_CONNECTED?66:t.t0===N.EVENT_TYPE.SUPERVISOR_HANGUP?68:t.t0===N.EVENT_TYPE.SET_AGENT_STATUS?70:t.t0===N.EVENT_TYPE.GET_AGENT_STATUS?72:t.t0===N.EVENT_TYPE.STATE_CHANGE?74:76;break;case 4:return yt(n,Z,N.ERROR_TYPE.CAN_NOT_LOG_IN,N.EVENT_TYPE.LOGIN_RESULT)&&(ft(N.EVENT_TYPE.LOGIN_RESULT,n,a),n.success&&Gt()),t.abrupt("break",76);case 6:return yt(n,tt,N.ERROR_TYPE.CAN_NOT_LOG_OUT,N.EVENT_TYPE.LOGOUT_RESULT)&&ft(N.EVENT_TYPE.LOGOUT_RESULT,{success:n.success,loginFrameHeight:n.loginFrameHeight},a),t.abrupt("break",76);case 8:return yt(n,K,N.ERROR_TYPE.CAN_NOT_START_THE_CALL,N.EVENT_TYPE.CALL_STARTED)&&ft(N.EVENT_TYPE.CALL_STARTED,n.call,a),t.abrupt("break",76);case 10:return yt(n,K,N.ERROR_TYPE.CAN_NOT_START_THE_CALL,N.EVENT_TYPE.QUEUED_CALL_STARTED)&&ft(N.EVENT_TYPE.QUEUED_CALL_STARTED,n.call,a),t.abrupt("break",76);case 12:if(!yt(n,K,N.ERROR_TYPE.CAN_NOT_START_THE_CALL,N.EVENT_TYPE.CALL_CONNECTED)){t.next=24;break}if(St(),!M){t.next=23;break}return t.next=17,m.supervisorDisconnect();case 17:return T=t.sent,Tt.validateClassObject(T,ut),M=!1,ft(N.EVENT_TYPE.SUPERVISOR_HANGUP,T,a),ft(N.EVENT_TYPE.CALL_CONNECTED,n.call,a),t.abrupt("break",76);case 23:ft(N.EVENT_TYPE.CALL_CONNECTED,n.call,a);case 24:return t.abrupt("break",76);case 25:return yt(n,J,N.ERROR_TYPE.CAN_NOT_END_THE_CALL,N.EVENT_TYPE.HANGUP)&&ft(N.EVENT_TYPE.HANGUP,n.calls,a),t.abrupt("break",76);case 27:return yt(n,Q,N.ERROR_TYPE.CAN_NOT_ADD_PARTICIPANT,N.EVENT_TYPE.PARTICIPANT_ADDED)&&(o=n.initialCallHasEnded,_=n.callInfo,i=n.phoneNumber,l=n.callId,ft(N.EVENT_TYPE.PARTICIPANT_ADDED,{initialCallHasEnded:o,callInfo:_,phoneNumber:i,callId:l},a)),t.abrupt("break",76);case 29:return yt(n,Q,N.ERROR_TYPE.CAN_NOT_CONNECT_PARTICIPANT,N.EVENT_TYPE.PARTICIPANT_CONNECTED)&&(A=n.initialCallHasEnded,c=n.callInfo,u=n.phoneNumber,R=n.callId,ft(N.EVENT_TYPE.PARTICIPANT_CONNECTED,{initialCallHasEnded:A,callInfo:c,phoneNumber:u,callId:R},a)),t.abrupt("break",76);case 31:if(!yt(n,K,N.ERROR_TYPE.CAN_NOT_HANGUP_PARTICIPANT,N.EVENT_TYPE.PARTICIPANT_REMOVED)){t.next=37;break}return O=n.call,t.next=35,m.getActiveCalls();case 35:yt(P=t.sent,w)&&(0===(C=P.activeCalls).length?ft(N.EVENT_TYPE.HANGUP,O,a):O&&O.callAttributes&&O.callAttributes.participantType===N.PARTICIPANT_TYPE.INITIAL_CALLER?(S=Object.values(C).filter((function(t){return t.callType===N.CALL_TYPE.ADD_PARTICIPANT})).pop(),ft(S.state===N.CALL_STATE.TRANSFERRING?N.EVENT_TYPE.PARTICIPANT_ADDED:N.EVENT_TYPE.PARTICIPANT_CONNECTED,{initialCallHasEnded:!0})):ft(N.EVENT_TYPE.PARTICIPANT_REMOVED,{reason:O?O.reason:null},a));case 37:return t.abrupt("break",76);case 38:return ft(N.EVENT_TYPE.MESSAGE,n,a),t.abrupt("break",76);case 40:return ft(N.EVENT_TYPE.AFTER_CALL_WORK_STARTED,n,a),t.abrupt("break",76);case 42:return ft(N.EVENT_TYPE.WRAP_UP_ENDED,n,a),t.abrupt("break",76);case 44:return bt(n),t.abrupt("break",76);case 46:return yt(n,H,N.ERROR_TYPE.CAN_NOT_TOGGLE_MUTE,N.EVENT_TYPE.MUTE_TOGGLE)&&ft(N.EVENT_TYPE.MUTE_TOGGLE,n,a),t.abrupt("break",76);case 48:return I=n.isThirdPartyOnHold,d=n.isCustomerOnHold,p=n.calls,yt(n,X,N.ERROR_TYPE.CAN_NOT_TOGGLE_HOLD,N.EVENT_TYPE.HOLD_TOGGLE)&&ft(N.EVENT_TYPE.HOLD_TOGGLE,{isThirdPartyOnHold:I,isCustomerOnHold:d,calls:p},a),t.abrupt("break",76);case 51:return L=n.isRecordingPaused,f=n.contactId,h=n.initialContactId,v=n.instanceId,G=n.region,yt(n,W,N.ERROR_TYPE.CAN_NOT_TOGGLE_RECORD,N.EVENT_TYPE.RECORDING_TOGGLE)&&ft(N.EVENT_TYPE.RECORDING_TOGGLE,{isRecordingPaused:L,contactId:f,initialContactId:h,instanceId:v,region:G},a),t.abrupt("break",76);case 54:return yt(n,X,N.ERROR_TYPE.CAN_NOT_SWAP_PARTICIPANTS,N.EVENT_TYPE.PARTICIPANTS_SWAPPED)&&(D=n.isThirdPartyOnHold,b=n.isCustomerOnHold,Y=n.calls,ft(N.EVENT_TYPE.HOLD_TOGGLE,{isThirdPartyOnHold:D,isCustomerOnHold:b,calls:Y},a)),t.abrupt("break",76);case 56:return yt(n,X,N.ERROR_TYPE.CAN_NOT_CONFERENCE,N.EVENT_TYPE.PARTICIPANTS_CONFERENCED)&&(U=n.isThirdPartyOnHold,V=n.isCustomerOnHold,ft(N.EVENT_TYPE.HOLD_TOGGLE,{isThirdPartyOnHold:U,isCustomerOnHold:V},a)),t.abrupt("break",76);case 58:return yt(n,Nt)&&(n.stats&&It(n.stats),n.isAudioStatsCompleted&&n.callId&&(g=n.callId,y=Ct(),ft(N.EVENT_TYPE.UPDATE_AUDIO_STATS_COMPLETED,{callId:g,mos:y},a))),t.abrupt("break",76);case 60:return yt(n,ct,N.ERROR_TYPE.CAN_NOT_BARGE_IN_SUPERVISOR,N.EVENT_TYPE.SUPERVISOR_BARGED_IN)&&ft(N.EVENT_TYPE.SUPERVISOR_BARGED_IN,n.call,a),t.abrupt("break",76);case 62:return yt(n,st,N.ERROR_TYPE.GENERIC_ERROR,N.EVENT_TYPE.CALL_BARGED_IN)&&ft(N.EVENT_TYPE.CALL_BARGED_IN,n,a),t.abrupt("break",76);case 64:return yt(n,ct,N.ERROR_TYPE.CAN_NOT_SUPERVISE_CALL,N.EVENT_TYPE.SUPERVISOR_CALL_STARTED)&&(M=!0,ft(N.EVENT_TYPE.SUPERVISOR_CALL_STARTED,n.call,a)),t.abrupt("break",76);case 66:return yt(n,ct,N.ERROR_TYPE.CAN_NOT_SUPERVISE_CALL,N.EVENT_TYPE.SUPERVISOR_CALL_CONNECTED)&&(M=!0,ft(N.EVENT_TYPE.SUPERVISOR_CALL_CONNECTED,n.call,a)),t.abrupt("break",76);case 68:return yt(n,ut,N.ERROR_TYPE.CAN_NOT_DISCONNECT_SUPERVISOR,N.EVENT_TYPE.SUPERVISOR_HANGUP)&&(M=!1,ft(N.EVENT_TYPE.SUPERVISOR_HANGUP,n.calls,a)),t.abrupt("break",76);case 70:return yt(n,ot,N.ERROR_TYPE.CAN_NOT_SET_AGENT_STATUS,N.EVENT_TYPE.SET_AGENT_STATUS)&&(k=n.statusId,ft(N.EVENT_TYPE.SET_AGENT_STATUS,{statusId:k},a)),t.abrupt("break",76);case 72:return yt(n,_t,N.ERROR_TYPE.CAN_NOT_GET_AGENT_STATUS,N.EVENT_TYPE.GET_AGENT_STATUS)&&ft(N.EVENT_TYPE.GET_AGENT_STATUS,n),t.abrupt("break",76);case 74:return yt(n,it,N.ERROR_TYPE.INVALID_STATE_CHANGE_RESULT,N.EVENT_TYPE.STATE_CHANGE)&&ft(N.EVENT_TYPE.STATE_CHANGE,n),t.abrupt("break",76);case 76:case"end":return t.stop()}}),t)})))).apply(this,arguments)}}])}));
//# sourceMappingURL=scv-connector-base.js.map